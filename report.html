<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Robot Management Reports</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 min-h-screen">
<!-- Navigation Tabs -->
<div class="bg-white shadow-sm border-b">
    <div class="container mx-auto px-6">
        <div class="flex space-x-8">
            <button onclick="showPage('reports-list')" id="reports-tab" class="py-4 px-2 border-b-2 border-blue-500 text-blue-600 font-medium">
                <i class="fas fa-list mr-2"></i>Generated Reports
            </button>
            <button onclick="showPage('create-report')" id="create-tab" class="py-4 px-2 border-b-2 border-transparent text-gray-500 font-medium hover:text-gray-700">
                <i class="fas fa-plus mr-2"></i>Create New Report
            </button>
        </div>
    </div>
</div>

<!-- Generated Reports Page -->
<div id="reports-list-page" class="container mx-auto px-6 py-8">
    <!-- Header -->
    <div class="flex justify-between items-center mb-8">
        <div>
            <h1 class="text-3xl font-bold text-gray-800">Generated Reports</h1>
            <p class="text-gray-600 mt-2">View and manage your robot management reports</p>
        </div>
        <button onclick="showPage('create-report')" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
            <i class="fas fa-plus mr-2"></i>Create New Report
        </button>
    </div>

    <!-- Filters -->
    <div class="bg-white rounded-lg shadow-sm p-6 mb-8">
        <div class="flex flex-wrap items-center gap-4">
            <!-- Location Filter -->
            <div class="flex-1 min-w-48">
                <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                <select id="filter-location" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" onchange="applyFilters()">
                    <option value="">All Locations</option>
                    <option value="marston">Marston Science Library</option>
                    <option value="dental">Dental Science Building</option>
                    <option value="turlington">Turlington Hall</option>
                    <option value="reitz">Reitz Union</option>
                </select>
            </div>

            <!-- Robot Filter -->
            <div class="flex-1 min-w-48">
                <label class="block text-sm font-medium text-gray-700 mb-2">Robot</label>
                <select id="filter-robot" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" onchange="applyFilters()">
                    <option value="">All Robots</option>
                    <option value="Pudu-CC1">Pudu CC1</option>
                </select>
            </div>

            <!-- Date Range Filter -->
            <div class="flex-1 min-w-48">
                <label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
                <select id="filter-date-range" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" onchange="toggleCustomDateRange(); applyFilters()">
                    <option value="">All Time</option>
                    <option value="last-7-days">Last 7 Days</option>
                    <option value="last-30-days">Last 30 Days</option>
                    <option value="last-90-days">Last 90 Days</option>
                    <option value="custom">Custom Range</option>
                </select>
            </div>

            <!-- Reset Filters -->
            <div class="flex items-end">
                <button onclick="resetFilters()" class="p-2 text-gray-500 hover:text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50">
                    <i class="fas fa-undo"></i>
                </button>
            </div>
        </div>

        <!-- Custom Date Range (Hidden by default) -->
        <div id="custom-date-filter" class="hidden mt-4 flex items-center gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">From</label>
                <input type="date" id="filter-date-from" class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" onchange="applyFilters()">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">To</label>
                <input type="date" id="filter-date-to" class="p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" onchange="applyFilters()">
            </div>
        </div>

        <!-- Active Filters Display -->
        <div id="active-filters" class="hidden mt-4 flex flex-wrap gap-2">
            <span class="text-sm font-medium text-gray-700">Active Filters:</span>
        </div>
    </div>

    <!-- Reports Table -->
    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
        <div class="px-6 py-4 border-b border-gray-200">
            <div class="flex justify-between items-center">
                <h2 class="text-lg font-semibold text-gray-800">Reports</h2>
                <div class="flex items-center space-x-2">
                    <span class="text-sm text-gray-500" id="results-count">Showing 12 reports</span>
                    <div class="border-l border-gray-300 pl-2">
                        <select class="text-sm border-0 focus:ring-0" onchange="changeSort()">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="name">Name A-Z</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Report Name</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Location</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Robot(s)</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Period</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Generated</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">View/Download</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody id="reports-table-body" class="bg-white divide-y divide-gray-200">
                    <!-- Sample Reports Data -->
                    <tr class="report-row" data-location="marston" data-robot="Pudu-CC1" data-date="2025-03-28">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div>
                                <div class="text-sm font-medium text-gray-900">March 2025 - Marston Library Performance</div>
                                <div class="text-xs text-gray-500">Detailed</div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">Marston Science Library</div>
                            <div class="text-xs text-gray-500">Gainesville, FL</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">3 robots</div>
                            <div class="text-xs text-gray-500">Pudu CC1</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Mar 1-31, 2025</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-800 rounded-full">
                                Robot Management
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 28, 2025 2:15 PM</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold bg-green-100 text-green-800 rounded-full">
                                <i class="fas fa-check mr-1"></i>Ready
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex space-x-2">
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md" onclick="viewOrDownloadReport('report-1')">
                                    View/Download
                                </button>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex space-x-2">
                                <button class="text-purple-600 hover:text-purple-800" onclick="shareReport('report-1')" title="Share">
                                    <i class="fas fa-share"></i>
                                </button>
                                <button class="text-red-600 hover:text-red-800" onclick="deleteReport('report-1')" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>

                    <tr class="report-row" data-location="dental" data-robot="Pudu-CC1" data-date="2025-03-28">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div>
                                <div class="text-sm font-medium text-gray-900">March 2025 - Dental Science Building Report</div>
                                <div class="text-xs text-gray-500">In-Depth</div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">Dental Science Building</div>
                            <div class="text-xs text-gray-500">Gainesville, FL</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">3 robots</div>
                            <div class="text-xs text-gray-500">Pudu CC1</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Mar 1-31, 2025</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-800 rounded-full">
                                Robot Management
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 28, 2025 1:45 PM</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold bg-green-100 text-green-800 rounded-full">
                                <i class="fas fa-check mr-1"></i>Ready
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex space-x-2">
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md" onclick="viewOrDownloadReport('report-2')">
                                    View/Download
                                </button>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex space-x-2">
                                <button class="text-purple-600 hover:text-purple-800" onclick="shareReport('report-2')" title="Share">
                                    <i class="fas fa-share"></i>
                                </button>
                                <button class="text-red-600 hover:text-red-800" onclick="deleteReport('report-2')" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>

                    <tr class="report-row" data-location="marston" data-robot="Pudu-CC1" data-date="2025-03-25">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div>
                                <div class="text-sm font-medium text-gray-900">Weekly Performance - MSL Robot 01</div>
                                <div class="text-xs text-gray-500">Overview</div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">Marston Science Library</div>
                            <div class="text-xs text-gray-500">Gainesville, FL</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">1 robot</div>
                            <div class="text-xs text-gray-500">Pudu CC1</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Mar 18-25, 2025</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-800 rounded-full">
                                Robot Management
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 25, 2025 6:00 AM</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold bg-green-100 text-green-800 rounded-full">
                                <i class="fas fa-check mr-1"></i>Ready
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex space-x-2">
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md" onclick="viewOrDownloadReport('report-3')">
                                    View/Download
                                </button>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex space-x-2">
                                <button class="text-purple-600 hover:text-purple-800" onclick="shareReport('report-3')" title="Share">
                                    <i class="fas fa-share"></i>
                                </button>
                                <button class="text-red-600 hover:text-red-800" onclick="deleteReport('report-3')" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>

                    <tr class="report-row" data-location="" data-robot="" data-date="2025-03-20">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div>
                                <div class="text-sm font-medium text-gray-900">Campus-Wide Cost Analysis</div>
                                <div class="text-xs text-gray-500">Detailed</div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">All Locations</div>
                            <div class="text-xs text-gray-500">Gainesville, FL</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">All robots</div>
                            <div class="text-xs text-gray-500">Pudu CC1</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Q1 2025</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-800 rounded-full">
                                Robot Management
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Mar 20, 2025 9:30 AM</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full">
                                <i class="fas fa-spinner fa-spin mr-1"></i>Processing
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex space-x-2">
                                <button class="bg-gray-400 text-white px-4 py-2 rounded-md cursor-not-allowed" disabled>
                                    View/Download
                                </button>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <div class="flex space-x-2">
                                <button class="text-purple-600 hover:text-purple-800" onclick="shareReport('report-4')" title="Share">
                                    <i class="fas fa-share"></i>
                                </button>
                                <button class="text-red-600 hover:text-red-800" onclick="deleteReport('report-4')" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Empty State (hidden by default) -->
        <div id="empty-state" class="hidden text-center py-12">
            <i class="fas fa-file-alt text-gray-300 text-6xl mb-4"></i>
            <h3 class="text-lg font-medium text-gray-900 mb-2">No Reports Found</h3>
            <p class="text-gray-500 mb-4">No reports match your current filters. Try adjusting your search criteria.</p>
            <button onclick="resetFilters()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                Reset Filters
            </button>
        </div>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-between mt-6">
        <div class="text-sm text-gray-700">
            Showing <span class="font-medium">1</span> to <span class="font-medium">4</span> of <span class="font-medium">12</span> results
        </div>
        <div class="flex space-x-1">
            <button class="px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50">Previous</button>
            <button class="px-3 py-2 text-sm bg-blue-500 text-white rounded-md">1</button>
            <button class="px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50">2</button>
            <button class="px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50">3</button>
            <button class="px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50">Next</button>
        </div>
    </div>
</div>

<!-- Create Report Page -->
<div id="create-report-page" class="hidden">
    <div class="container mx-auto px-6 py-8">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Create Custom Report</h1>
            <p class="text-gray-600 mt-2">Configure your robot management report settings</p>
        </div>

        <!-- Progress Steps -->
        <div class="mb-12">
            <div class="flex items-center justify-between relative">
                <div class="absolute top-5 left-0 w-full h-0.5 bg-gray-200"></div>
                <div id="progress-line" class="absolute top-5 left-0 h-0.5 bg-blue-500 transition-all duration-500" style="width: 33.33%"></div>

                <div class="flex flex-col items-center relative bg-gray-50 px-4">
                    <div class="w-10 h-10 bg-blue-500 text-white rounded-full flex items-center justify-center font-semibold">1</div>
                    <span class="text-sm font-medium text-gray-700 mt-2">Service Selection</span>
                </div>
                <div class="flex flex-col items-center relative bg-gray-50 px-4">
                    <div id="step2-circle" class="w-10 h-10 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-semibold">2</div>
                    <span class="text-sm font-medium text-gray-500 mt-2">Hardware Selection</span>
                </div>
                <div class="flex flex-col items-center relative bg-gray-50 px-4">
                    <div id="step3-circle" class="w-10 h-10 bg-gray-300 text-gray-600 rounded-full flex items-center justify-center font-semibold">3</div>
                    <span class="text-sm font-medium text-gray-500 mt-2">Report Configuration</span>
                </div>
            </div>
        </div>

    <!-- Step 1: Service Selection -->
    <div id="step1" class="bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">
            <i class="fas fa-cogs text-blue-500 mr-3"></i>Step 1: Service Selection
        </h2>

        <!-- Monitoring Module -->
        <div class="mb-6">
            <h3 class="text-lg font-medium text-gray-700 mb-4">Available Modules</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Robot Management Service -->
                <div class="border-2 border-blue-500 bg-blue-50 rounded-lg p-4 cursor-pointer" onclick="selectModule('robot-management')">
                    <div class="flex items-center justify-between mb-3">
                        <i class="fas fa-robot text-blue-500 text-2xl"></i>
                        <i class="fas fa-check-circle text-blue-500"></i>
                    </div>
                    <h4 class="font-semibold text-gray-800">Robot Management</h4>
                    <p class="text-sm text-gray-600 mt-1">Monitor and manage robotic cleaning operations</p>
                </div>

                <!-- Future Sensor Management -->
                <div class="border-2 border-gray-200 bg-gray-50 rounded-lg p-4 opacity-50 cursor-not-allowed">
                    <div class="flex items-center justify-between mb-3">
                        <i class="fas fa-sensors text-gray-400 text-2xl"></i>
                        <span class="text-xs bg-gray-300 text-gray-600 px-2 py-1 rounded">Coming Soon</span>
                    </div>
                    <h4 class="font-semibold text-gray-600">Sensor Management</h4>
                    <p class="text-sm text-gray-500 mt-1">IoT sensor monitoring and analytics</p>
                </div>

                <!-- Future Module Placeholder -->
                <div class="border-2 border-gray-200 bg-gray-50 rounded-lg p-4 opacity-50 cursor-not-allowed">
                    <div class="flex items-center justify-between mb-3">
                        <i class="fas fa-plus text-gray-400 text-2xl"></i>
                        <span class="text-xs bg-gray-300 text-gray-600 px-2 py-1 rounded">Future</span>
                    </div>
                    <h4 class="font-semibold text-gray-600">Additional Services</h4>
                    <p class="text-sm text-gray-500 mt-1">More monitoring capabilities</p>
                </div>
            </div>
        </div>

        <!-- Content Categories for Robot Management -->
        <div id="robot-management-content" class="mt-8">
            <h3 class="text-lg font-medium text-gray-700 mb-4">Report Content Categories</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <label class="flex items-start space-x-3 p-4 border-2 border-blue-200 bg-blue-50 rounded-lg cursor-pointer">
                    <input type="checkbox" class="content-category mt-1" value="financial-performance" checked>
                    <div>
                        <div class="font-semibold text-gray-800">Cleaning Performance</div>
                        <div class="text-sm text-gray-600">Cleaning tasks, coverage, and efficiency metrics</div>
                    </div>
                </label>
                <label class="flex items-start space-x-3 p-4 border-2 border-blue-200 bg-blue-50 rounded-lg cursor-pointer">
                    <input type="checkbox" class="content-category mt-1" value="resource-utilization" checked>
                    <div>
                        <div class="font-semibold text-gray-800">Resource Utilization & Efficiency</div>
                        <div class="text-sm text-gray-600">Energy usage, water consumption, and efficiency metrics</div>
                    </div>
                </label>

                <label class="flex items-start space-x-3 p-4 border-2 border-blue-200 bg-blue-50 rounded-lg cursor-pointer">
                    <input type="checkbox" class="content-category mt-1" value="financial-performance" checked>
                    <div>
                        <div class="font-semibold text-gray-800">Financial Performance</div>
                        <div class="text-sm text-gray-600">Cost analysis, savings, and ROI metrics</div>
                    </div>
                </label>

                <label class="flex items-start space-x-3 p-4 border-2 border-blue-200 bg-blue-50 rounded-lg cursor-pointer">
                    <input type="checkbox" class="content-category mt-1" value="charging-performance" checked>
                    <div>
                        <div class="font-semibold text-gray-800">Charging Sessions Performance</div>
                        <div class="text-sm text-gray-600">Battery management, charging patterns, and power analysis</div>
                    </div>
                </label>
            </div>
        </div>

        <div class="flex justify-end mt-8">
            <button onclick="nextStep(2)" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                Continue to Hardware Selection
                <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </div>

    <!-- Step 2: Hardware Selection -->
    <div id="step2" class="bg-white rounded-lg shadow-lg p-8 hidden">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">
            <i class="fas fa-microchip text-blue-500 mr-3"></i>Step 2: Hardware Selection
        </h2>

        <!-- Selection Method Tabs -->
        <div class="flex border-b mb-6">
            <button onclick="switchTab('location')" class="tab-button active px-6 py-3 border-b-2 border-blue-500 text-blue-600 font-medium">
                <i class="fas fa-map-marker-alt mr-2"></i>By Location
            </button>
            <button onclick="switchTab('robot')" class="tab-button px-6 py-3 border-b-2 border-transparent text-gray-500 font-medium hover:text-gray-700">
                <i class="fas fa-robot mr-2"></i>By Robot
            </button>
        </div>

        <!-- Location Selection Tab -->
        <div id="location-tab" class="tab-content">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                    <select id="country-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" onchange="updateStates()">
                        <option value="">All Countries</option>
                        <option value="US" selected>United States</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">State</label>
                    <select id="state-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" onchange="updateCities()">
                        <option value="">All States</option>
                        <option value="FL" selected>Florida</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">City</label>
                    <select id="city-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" onchange="updateBuildings()">
                        <option value="">All Cities</option>
                        <option value="Gainesville" selected>Gainesville</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Building</label>
                    <select id="building-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" onchange="updateRobotsByLocation()">
                        <option value="">All Buildings</option>
                        <option value="marston">Marston Science Library</option>
                        <option value="dental">Dental Science Building</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Robot Selection Tab -->
        <div id="robot-tab" class="tab-content hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Robot Type</label>
                    <select id="robot-name-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <option value="">All Robots</option>
                        <option value="Pudu-CC1">Pudu CC1</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Serial Number</label>
                    <select id="robot-sn-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <option value="">All Serial Numbers</option>
                        <option value="811135422060228">811135422060228</option>
                        <option value="811135422060216">811135422060216</option>
                        <option value="CC1-2024-003">CC1-2024-003</option>
                        <option value="CC1-2024-004">CC1-2024-004</option>
                        <option value="CC1-2024-005">CC1-2024-005</option>
                        <option value="CC1-2024-006">CC1-2024-006</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Selected Robots Summary -->
        <div class="mt-8 p-4 bg-gray-50 rounded-lg">
            <h3 class="font-semibold text-gray-800 mb-2">
                <i class="fas fa-list text-blue-500 mr-2"></i>Selected Hardware Summary
            </h3>
            <div id="selection-summary" class="text-sm text-gray-600">
                Currently selected: All robots in Gainesville, FL
            </div>
        </div>

        <div class="flex justify-between mt-8">
            <button onclick="previousStep(1)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>Back
            </button>
            <button onclick="nextStep(3)" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                Continue to Configuration
                <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>
    </div>

    <!-- Step 3: Report Configuration -->
    <div id="step3" class="bg-white rounded-lg shadow-lg p-8 hidden">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">
            <i class="fas fa-cog text-blue-500 mr-3"></i>Step 3: Report Configuration
        </h2>

        <!-- Report Name -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-gray-700 mb-4">Report Name</h3>
            <input type="text" id="report-name" placeholder="Enter report name" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Data Scope -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-gray-700 mb-4">Data Scope</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Time Range</label>
                    <select id="time-range" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <option value="last-7-days">Last 7 Days</option>
                        <option value="last-30-days" selected>Last 30 Days</option>
                        <option value="last-90-days">Last 90 Days</option>
                        <option value="custom">Custom Range</option>
                    </select>
                </div>

                <div id="custom-date-range" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Custom Date Range</label>
                    <div class="flex space-x-2">
                        <input type="date" class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                        <span class="flex items-center text-gray-500">to</span>
                        <input type="date" class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>
            </div>
        </div>

        <!-- Report Detail Level -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-gray-700 mb-4">Report Detail Level</h3>
            <div class="space-y-4">
                <label class="flex items-center space-x-3">
                    <input type="radio" name="detail-level" value="overview" checked>
                    <span class="font-medium">Overview</span>
                    <span class="text-sm text-gray-600">High-level summary and key metrics</span>
                </label>
                <label class="flex items-center space-x-3">
                    <input type="radio" name="detail-level" value="detailed">
                    <span class="font-medium">Detailed</span>
                    <span class="text-sm text-gray-600">Detailed metrics with facility breakdowns</span>
                </label>
                <label class="flex items-center space-x-3">
                    <input type="radio" name="detail-level" value="in-depth">
                    <span class="font-medium">In-Depth</span>
                    <span class="text-sm text-gray-600">Comprehensive analysis with all available data</span>
                </label>
            </div>
        </div>

        <!-- Report Preview -->
        <div class="mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg">
            <h3 class="font-semibold text-gray-800 mb-3">
                <i class="fas fa-eye text-blue-500 mr-2"></i>Report Preview
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <strong>Service:</strong> Robot Management<br>
                    <strong>Content:</strong> All categories selected<br>
                    <strong>Hardware:</strong> All robots in Gainesville, FL
                </div>
                <div>
                    <strong>Time Range:</strong> Last 30 Days<br>
                    <strong>Detail Level:</strong> Overview
                </div>
            </div>
        </div>

        <div class="flex justify-between">
            <button onclick="previousStep(2)" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>Back
            </button>
            <button onclick="generateReport()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                <i class="fas fa-file-alt mr-2"></i>Generate Report
            </button>
        </div>
    </div>
</div>
</div>

<script>
    // Page navigation
    function showPage(pageId) {
        // Hide all pages
        document.getElementById('reports-list-page').classList.add('hidden');
        document.getElementById('create-report-page').classList.add('hidden');

        // Show selected page
        if (pageId === 'reports-list') {
            document.getElementById('reports-list-page').classList.remove('hidden');
            // Update tab states
            document.getElementById('reports-tab').classList.remove('border-transparent', 'text-gray-500');
            document.getElementById('reports-tab').classList.add('border-blue-500', 'text-blue-600');
            document.getElementById('create-tab').classList.remove('border-blue-500', 'text-blue-600');
            document.getElementById('create-tab').classList.add('border-transparent', 'text-gray-500');
        } else if (pageId === 'create-report') {
            document.getElementById('create-report-page').classList.remove('hidden');
            // Update tab states
            document.getElementById('create-tab').classList.remove('border-transparent', 'text-gray-500');
            document.getElementById('create-tab').classList.add('border-blue-500', 'text-blue-600');
            document.getElementById('reports-tab').classList.remove('border-blue-500', 'text-blue-600');
            document.getElementById('reports-tab').classList.add('border-transparent', 'text-gray-500');
        }
    }

    // Report Filters
    function applyFilters() {
        const locationFilter = document.getElementById('filter-location').value;
        const robotFilter = document.getElementById('filter-robot').value;
        const dateRangeFilter = document.getElementById('filter-date-range').value;
        const dateFromFilter = document.getElementById('filter-date-from').value;
        const dateToFilter = document.getElementById('filter-date-to').value;

        const reportRows = document.querySelectorAll('.report-row');
        let visibleCount = 0;

        reportRows.forEach(row => {
            let show = true;

            // Location filter
            if (locationFilter && row.dataset.location !== locationFilter && row.dataset.location !== '') {
                show = false;
            }

            // Robot filter
            if (robotFilter && !row.dataset.robot.includes(robotFilter) && row.dataset.robot !== '') {
                show = false;
            }

            // Date range filter
            if (dateRangeFilter && dateRangeFilter !== 'custom') {
                const reportDate = new Date(row.dataset.date);
                const today = new Date();
                let daysDiff = Math.floor((today - reportDate) / (1000 * 60 * 60 * 24));

                if (dateRangeFilter === 'last-7-days' && daysDiff > 7) show = false;
                if (dateRangeFilter === 'last-30-days' && daysDiff > 30) show = false;
                if (dateRangeFilter === 'last-90-days' && daysDiff > 90) show = false;
            }

            // Custom date range filter
            if (dateRangeFilter === 'custom' && (dateFromFilter || dateToFilter)) {
                const reportDate = new Date(row.dataset.date);
                if (dateFromFilter && reportDate < new Date(dateFromFilter)) show = false;
                if (dateToFilter && reportDate > new Date(dateToFilter)) show = false;
            }

            if (show) {
                row.style.display = '';
                visibleCount++;
            } else {
                row.style.display = 'none';
            }
        });

        // Update results count
        document.getElementById('results-count').textContent = `Showing ${visibleCount} reports`;

        // Show/hide empty state
        const emptyState = document.getElementById('empty-state');
        const tableBody = document.getElementById('reports-table-body');

        if (visibleCount === 0) {
            tableBody.style.display = 'none';
            emptyState.classList.remove('hidden');
        } else {
            tableBody.style.display = '';
            emptyState.classList.add('hidden');
        }

        updateActiveFilters();
    }

    function updateActiveFilters() {
        const activeFiltersDiv = document.getElementById('active-filters');
        const locationFilter = document.getElementById('filter-location');
        const robotFilter = document.getElementById('filter-robot');
        const dateRangeFilter = document.getElementById('filter-date-range');

        let activeFilters = [];

        if (locationFilter.value) {
            activeFilters.push(`Location: ${locationFilter.options[locationFilter.selectedIndex].text}`);
        }
        if (robotFilter.value) {
            activeFilters.push(`Robot: ${robotFilter.value}`);
        }
        if (dateRangeFilter.value) {
            activeFilters.push(`Date: ${dateRangeFilter.options[dateRangeFilter.selectedIndex].text}`);
        }

        if (activeFilters.length > 0) {
            activeFiltersDiv.classList.remove('hidden');
            const filtersHtml = activeFilters.map(filter =>
                `<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                    ${filter}
                    <button class="ml-1 text-blue-600 hover:text-blue-800" onclick="clearSpecificFilter('${filter}')">Ã—</button>
                </span>`
            ).join('');
            activeFiltersDiv.innerHTML = `<span class="text-sm font-medium text-gray-700">Active Filters:</span> ${filtersHtml}`;
        } else {
            activeFiltersDiv.classList.add('hidden');
        }
    }

    function resetFilters() {
        document.getElementById('filter-location').value = '';
        document.getElementById('filter-robot').value = '';
        document.getElementById('filter-date-range').value = '';
        document.getElementById('filter-date-from').value = '';
        document.getElementById('filter-date-to').value = '';
        document.getElementById('custom-date-filter').classList.add('hidden');
        applyFilters();
    }

    function toggleCustomDateRange() {
        const dateRangeFilter = document.getElementById('filter-date-range');
        const customDateFilter = document.getElementById('custom-date-filter');

        if (dateRangeFilter.value === 'custom') {
            customDateFilter.classList.remove('hidden');
        } else {
            customDateFilter.classList.add('hidden');
            document.getElementById('filter-date-from').value = '';
            document.getElementById('filter-date-to').value = '';
        }
    }

    function changeSort() {
        console.log('Sorting changed');
    }

    // Report Actions
    function viewOrDownloadReport(reportId) {
        const modal = `
            <div class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50" id="view-download-modal">
                <div class="bg-white rounded-lg p-6 w-96">
                    <h3 class="text-lg font-semibold mb-4">View or Download Report</h3>
                    <div class="space-y-3">
                        <button class="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md" onclick="viewReport('${reportId}')">
                            View in Browser
                        </button>
                        <button class="w-full bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md" onclick="downloadReport('${reportId}')">
                            Download PDF
                        </button>
                    </div>
                    <div class="flex justify-end mt-6">
                        <button onclick="closeViewDownloadModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800">Cancel</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modal);
    }

    function closeViewDownloadModal() {
        const modal = document.getElementById('view-download-modal');
        if (modal) modal.remove();
    }

    function viewReport(reportId) {
        alert(`Opening report ${reportId} for viewing`);
        closeViewDownloadModal();
    }

    function downloadReport(reportId) {
        const link = document.createElement('a');
        link.href = `#`; // Replace with actual download URL
        link.download = `robot-report-${reportId}.pdf`;
        link.textContent = 'Download Report';
        alert(`Downloading report ${reportId} as PDF...`);
        closeViewDownloadModal();
    }

    function shareReport(reportId) {
        const shareModal = `
            <div class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50" id="share-modal">
                <div class="bg-white rounded-lg p-6 w-96">
                    <h3 class="text-lg font-semibold mb-4">Share Report</h3>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Share Link</label>
                            <div class="flex">
                                <input type="text" value="https://robotmgmt.ufl.edu/reports/${reportId}"
                                       class="flex-1 p-2 border border-gray-300 rounded-l-md text-sm" readonly>
                                <button class="px-3 py-2 bg-blue-500 text-white rounded-r-md text-sm hover:bg-blue-600"
                                        onclick="copyToClipboard('https://robotmgmt.ufl.edu/reports/${reportId}')">Copy</button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Send via Email</label>
                            <input type="email" placeholder="Enter email address"
                                   class="w-full p-2 border border-gray-300 rounded-md text-sm">
                        </div>
                    </div>
                    <div class="flex justify-end space-x-2 mt-6">
                        <button onclick="closeShareModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800">Cancel</button>
                        <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">Send</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', shareModal);
    }

    function closeShareModal() {
        const modal = document.getElementById('share-modal');
        if (modal) modal.remove();
    }

    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
            alert('Link copied to clipboard!');
        });
    }

    function deleteReport(reportId) {
        if (confirm('Are you sure you want to delete this report? This action cannot be undone.')) {
            const row = document.querySelector(`[onclick*="${reportId}"]`).closest('tr');
            row.remove();
            applyFilters();
            alert(`Report ${reportId} has been deleted.`);
        }
    }

    // Step navigation (for create report page)
    function nextStep(step) {
        document.getElementById(`step${step - 1}`).classList.add('hidden');
        document.getElementById(`step${step}`).classList.remove('hidden');

        const progressLine = document.getElementById('progress-line');
        const stepCircle = document.getElementById(`step${step}-circle`);

        if (step === 2) {
            progressLine.style.width = '66.66%';
            stepCircle.classList.remove('bg-gray-300', 'text-gray-600');
            stepCircle.classList.add('bg-blue-500', 'text-white');
            stepCircle.nextElementSibling.classList.remove('text-gray-500');
            stepCircle.nextElementSibling.classList.add('text-gray-700');
        } else if (step === 3) {
            progressLine.style.width = '100%';
            stepCircle.classList.remove('bg-gray-300', 'text-gray-600');
            stepCircle.classList.add('bg-blue-500', 'text-white');
            stepCircle.nextElementSibling.classList.remove('text-gray-500');
            stepCircle.nextElementSibling.classList.add('text-gray-700');
        }
    }

    function previousStep(step) {
        document.getElementById(`step${step + 1}`).classList.add('hidden');
        document.getElementById(`step${step}`).classList.remove('hidden');

        const progressLine = document.getElementById('progress-line');
        const nextStepCircle = document.getElementById(`step${step + 1}-circle`);

        if (step === 1) {
            progressLine.style.width = '33.33%';
            nextStepCircle.classList.remove('bg-blue-500', 'text-white');
            nextStepCircle.classList.add('bg-gray-300', 'text-gray-600');
            nextStepCircle.nextElementSibling.classList.remove('text-gray-700');
            nextStepCircle.nextElementSibling.classList.add('text-gray-500');
        } else if (step === 2) {
            progressLine.style.width = '66.66%';
            nextStepCircle.classList.remove('bg-blue-500', 'text-white');
            nextStepCircle.classList.add('bg-gray-300', 'text-gray-600');
            nextStepCircle.nextElementSibling.classList.remove('text-gray-700');
            nextStepCircle.nextElementSibling.classList.add('text-gray-500');
        }
    }

    // Tab switching (for create report page)
    function switchTab(tabName) {
        document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
        document.querySelectorAll('.tab-button').forEach(button => {
            button.classList.remove('border-blue-500', 'text-blue-600', 'active');
            button.classList.add('border-transparent', 'text-gray-500');
        });

        document.getElementById(tabName + '-tab').classList.remove('hidden');
        event.target.classList.remove('border-transparent', 'text-gray-500');
        event.target.classList.add('border-blue-500', 'text-blue-600', 'active');
    }

    // Show/hide custom date range
    document.addEventListener('DOMContentLoaded', function() {
        const timeRangeSelect = document.getElementById('time-range');
        if (timeRangeSelect) {
            timeRangeSelect.addEventListener('change', function() {
                const customRange = document.getElementById('custom-date-range');
                if (this.value === 'custom') {
                    customRange.classList.remove('hidden');
                    customRange.previousElementSibling.classList.add('md:col-span-1');
                } else {
                    customRange.classList.add('hidden');
                    customRange.previousElementSibling.classList.remove('md:col-span-1');
                }
            });
        }
    });

    // Module selection (for create report page)
    function selectModule(moduleId) {
        document.querySelectorAll('.border-blue-500').forEach(el => {
            if (el.classList.contains('bg-blue-50')) {
                el.classList.remove('border-blue-500', 'bg-blue-50');
                el.classList.add('border-gray-200', 'bg-white');
                const checkIcon = el.querySelector('.fa-check-circle');
                if (checkIcon) checkIcon.remove();
            }
        });

        const selectedModule = event.currentTarget;
        selectedModule.classList.remove('border-gray-200', 'bg-white');
        selectedModule.classList.add('border-blue-500', 'bg-blue-50');

        if (!selectedModule.querySelector('.fa-check-circle')) {
            const iconContainer = selectedModule.querySelector('.flex.items-center.justify-between');
            iconContainer.innerHTML = iconContainer.innerHTML.split('<i class="fas fa-check-circle')[0] + '<i class="fas fa-check-circle text-blue-500"></i>';
        }

        if (moduleId === 'robot-management') {
            const content = document.getElementById('robot-management-content');
            if (content) content.style.display = 'block';
        }
    }

    // Location dropdown interactions (for create report page)
    function updateStates() {
        const country = document.getElementById('country-select').value;
        const stateSelect = document.getElementById('state-select');

        if (stateSelect) {
            stateSelect.innerHTML = '<option value="">All States</option>';
            if (country === 'US') {
                stateSelect.innerHTML += '<option value="FL" selected>Florida</option>';
                stateSelect.innerHTML += '<option value="CA">California</option>';
                stateSelect.innerHTML += '<option value="TX">Texas</option>';
            }
            updateCities();
        }
    }

    function updateCities() {
        const stateSelect = document.getElementById('state-select');
        const citySelect = document.getElementById('city-select');

        if (stateSelect && citySelect) {
            const state = stateSelect.value;
            citySelect.innerHTML = '<option value="">All Cities</option>';
            if (state === 'FL') {
                citySelect.innerHTML += '<option value="Gainesville" selected>Gainesville</option>';
                citySelect.innerHTML += '<option value="Miami">Miami</option>';
                citySelect.innerHTML += '<option value="Tampa">Tampa</option>';
            }
            updateBuildings();
        }
    }

    function updateBuildings() {
        const citySelect = document.getElementById('city-select');
        const buildingSelect = document.getElementById('building-select');

        if (citySelect && buildingSelect) {
            const city = citySelect.value;
            buildingSelect.innerHTML = '<option value="">All Buildings</option>';
            if (city === 'Gainesville') {
                buildingSelect.innerHTML += '<option value="marston">Marston Science Library</option>';
                buildingSelect.innerHTML += '<option value="dental">Dental Science Building</option>';
                buildingSelect.innerHTML += '<option value="turlington">Turlington Hall</option>';
                buildingSelect.innerHTML += '<option value="reitz">Reitz Union</option>';
            }
            updateRobotsByLocation();
        }
    }

    function updateRobotsByLocation() {
        updateSelectionSummary();
    }

    // Update selection summary (for create report page)
    function updateSelectionSummary() {
        const summaryElement = document.getElementById('selection-summary');
        if (summaryElement) {
            const country = document.getElementById('country-select')?.value || '';
            const state = document.getElementById('state-select')?.value || '';
            const city = document.getElementById('city-select')?.value || '';
            const building = document.getElementById('building-select')?.value || '';
            const robotName = document.getElementById('robot-name-select')?.value || '';
            const robotSN = document.getElementById('robot-sn-select')?.value || '';

            let summary = 'Currently selected: ';

            if (robotName || robotSN) {
                summary += robotName ? `Robot ${robotName}` : `Robot SN ${robotSN}`;
            } else if (building) {
                const buildingNames = {
                    'marston': 'Marston Science Library',
                    'dental': 'Dental Science Building',
                    'turlington': 'Turlington Hall',
                    'reitz': 'Reitz Union'
                };
                summary += `All robots in ${buildingNames[building]}`;
            } else if (city) {
                summary += `All robots in ${city}`;
            } else if (state) {
                summary += `All robots in ${state}`;
            } else if (country) {
                summary += `All robots in ${country}`;
            } else {
                summary += 'All robots';
            }

            summaryElement.textContent = summary;
        }
    }

    // Update report preview (for create report page)
    function updateReportPreview() {
        const previewElement = document.querySelector('#step3 .grid.text-sm');
        if (previewElement) {
            const reportName = document.getElementById('report-name')?.value || 'Custom Report';
            const timeRange = document.getElementById('time-range')?.value || '';
            const detailLevel = document.querySelector('input[name="detail-level"]:checked')?.value || 'overview';
            const contentCategories = Array.from(document.querySelectorAll('.content-category:checked')).map(cb => cb.value);

            const timeRangeText = {
                'last-7-days': 'Last 7 Days',
                'last-30-days': 'Last 30 Days',
                'last-90-days': 'Last 90 Days',
                'custom': 'Custom Range'
            }[timeRange] || 'Last 30 Days';

            const detailLevelText = {
                'overview': 'Overview',
                'detailed': 'Detailed',
                'in-depth': 'In-Depth'
            }[detailLevel] || 'Overview';

            previewElement.innerHTML = `
                <div>
                    <strong>Service:</strong> Robot Management<br>
                    <strong>Content:</strong> ${contentCategories.length > 0 ? contentCategories.join(', ') : 'All categories selected'}<br>
                    <strong>Hardware:</strong> ${document.getElementById('selection-summary')?.textContent || 'All robots in Gainesville, FL'}
                </div>
                <div>
                    <strong>Time Range:</strong> ${timeRangeText}<br>
                    <strong>Detail Level:</strong> ${detailLevelText}<br>
                    <strong>Report Name:</strong> ${reportName}
                </div>
            `;
        }
    }

    // Content category and detail level selection updates
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.content-category').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const parent = this.closest('label');
                if (this.checked) {
                    parent.classList.remove('border-gray-200', 'bg-white');
                    parent.classList.add('border-blue-200', 'bg-blue-50');
                } else {
                    parent.classList.remove('border-blue-200', 'bg-blue-50');
                    parent.classList.add('border-gray-200', 'bg-white');
                }
                updateReportPreview();
            });
        });

        document.querySelectorAll('input[name="detail-level"]').forEach(radio => {
            radio.addEventListener('change', updateReportPreview);
        });

        document.getElementById('report-name')?.addEventListener('input', updateReportPreview);
        document.getElementById('time-range')?.addEventListener('change', updateReportPreview);

        const robotNameSelect = document.getElementById('robot-name-select');
        const robotSNSelect = document.getElementById('robot-sn-select');

        if (robotNameSelect) robotNameSelect.addEventListener('change', updateSelectionSummary);
        if (robotSNSelect) robotSNSelect.addEventListener('change', updateSelectionSummary);

        updateSelectionSummary();
        updateReportPreview();
    });

    // Generate report function
    function generateReport() {
        const formData = {
            service: 'robot-management',
            contentCategories: Array.from(document.querySelectorAll('.content-category:checked')).map(cb => cb.value),
            location: {
                country: document.getElementById('country-select')?.value || '',
                state: document.getElementById('state-select')?.value || '',
                city: document.getElementById('city-select')?.value || '',
                building: document.getElementById('building-select')?.value || ''
            },
            robot: {
                name: document.getElementById('robot-name-select')?.value || '',
                serialNumber: document.getElementById('robot-sn-select')?.value || ''
            },
            timeRange: document.getElementById('time-range')?.value || '',
            reportName: document.getElementById('report-name')?.value || 'Custom Report',
            detailLevel: document.querySelector('input[name="detail-level"]:checked')?.value || 'overview'
        };

        const button = event.target;
        const originalText = button.innerHTML;
        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Generating Report...';
        button.disabled = true;

        setTimeout(() => {
            alert('Report generation initiated! You will receive notification when ready.');
            button.innerHTML = originalText;
            button.disabled = false;
            showPage('reports-list');
            console.log('Report configuration:', formData);
        }, 2000);
    }
</script>
</body>
</html>