---
# Dynamic Database Configuration for Robot Data Pipeline
# Main database is hardcoded, project databases are dynamically resolved

# Main control database (hardcoded)
main_database: "ry-vue"

# List of databases that need notifications (can include dynamic ones)
notification_needed:
  - "project"

region: "us-east-2"

transform_supported_databases:
  - "university_of_florida"

s3_config:
  region: "us-east-2"
  buckets:
    university_of_florida: "pudu-robot-transforms-university-of-florida-889717-us-east-2"
    nexus_iq_office: "pudu-robot-transforms-nexus-iq-office-144926-us-east-2"
    foxx_irvine_office: "pudu-robot-transforms-foxx-irvine-office-144924-us-east-2"

tables:
  # Main Database Tables (ry-vue)
  main_building_info:
    - database: "main"
      table_name: "pro_building_info"
      primary_keys: ["building_id"]
      fields: null
      description: "Building info in main database"

  main_project_info:
    - database: "main"
      table_name: "pro_project_info"
      primary_keys: ["project_id"]
      fields: null
      description: "Project info in main database"

  main_robot_management:
    - database: "main"
      table_name: "mnt_robots_management"
      primary_keys: ["robot_sn"]
      fields: null
      description: "Robot management with project mapping in main database"

  tenant_resource:
    - database: "main"
      table_name: "sys_tenant_resource"
      primary_keys: ["tenant_id", "resource_type", "resource_key"]
      fields: null
      description: "Tenant resource mapping in main database"

  # Project Database Tables (dynamically resolved per robot)
  location:
    - database: "project"
      table_name: "pro_building_info"
      primary_keys: ["building_id"]
      fields: null
      description: "Building info table in project database"

  robot_status:
    - database: "project"
      table_name: "mnt_robots_management"
      primary_keys: ["robot_sn"]
      fields: null
      description: "Robot status table in project database"

  robot_task:
    - database: "project"
      table_name: "mnt_robots_task"
      primary_keys: ["robot_sn", "task_name", "start_time"]
      fields: null
      description: "Robot task tracking table in project database"

  robot_charging:
    - database: "project"
      table_name: "mnt_robots_charging_sessions"
      primary_keys: ["robot_sn", "start_time", "end_time"]
      fields: null
      description: "Robot charging session data in project database"

  robot_events:
    - database: "project"
      table_name: "mnt_robot_events"
      primary_keys: ["robot_sn", "event_id"]
      fields: null
      description: "Robot events and errors in project database"

  robot_work_location:
    - database: "project"
      table_name: "mnt_robots_work_location"
      primary_keys: ["robot_sn", "update_time"]
      fields: null
      description: "Robot work location tracking in project database"

  floor_info:
    - database: "project"
      table_name: "pro_floor_info"
      primary_keys: ["floor_id"]
      fields: null
      description: "Floor information in project database"

  map_floor_mapping:
    - database: "project"
      table_name: "mnt_robot_map_floor_mapping"
      primary_keys: ["id"]
      fields: null
      description: "Map to floor mapping in project database"

  # Support ticket tables
  support_tickets_timeline:
    - database: "project"
      table_name: "mnt_robot_report_timeline"
      primary_keys: ["id"]
      fields: null
      description: "Support ticket timeline monitoring"

  support_tickets:
    - database: "project"
      table_name: "mnt_robot_event_reports"
      primary_keys: ["id"]
      fields: null
      description: "Support ticket event reports"

  # Reports management table
  mnt_reports:
    - database: "project"
      table_name: "mnt_reports"
      primary_keys: ["id"]
      fields: null
      description: "Reports management table for storing report URLs and status in project database"
